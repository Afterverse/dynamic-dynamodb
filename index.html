<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Dynamic DynamoDB by sebdah</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Dynamic DynamoDB</h1>
        <p>Auto-provisioning tool for DynamoDB</p>

        <p class="view"><a href="https://github.com/sebdah/dynamic-dynamodb">View the Project on GitHub <small>sebdah/dynamic-dynamodb</small></a></p>


        <ul>
          <li><a href="https://github.com/sebdah/dynamic-dynamodb/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/sebdah/dynamic-dynamodb/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/sebdah/dynamic-dynamodb">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="dynamic-dynamodb" class="anchor" href="#dynamic-dynamodb"><span class="octicon octicon-link"></span></a>Dynamic DynamoDB</h1>

<p>AWS DynamoDB is a great service, but it falls short when it comes to automated throughput scaling. This is where Dynamic DynamoDB enters the stage. It provides automatic read and write provisioning for DynamoDB.</p>

<p>All you need to do is to tell Dynamic DynamoDB at which point and how much you want to scale up or down your DynamoDB. An example is in place. Letâ€™s say you have way more traffic on your database during sales hours 4pm - 10pm. DynamicDB can monitor the increased throughput on your DynamoDB instance (via CloudWatch) and provision more throughput as needed. When the load is reducing Dynamic DynamoDB will sence that and automatically reduce your provisioning.</p>

<p>See an example of how to configure Dynamic DynamoDB under <strong>Basic usage</strong> or checkout <code>dynamic-dynamodb --help</code>.</p>

<h2>
<a name="features-in-short" class="anchor" href="#features-in-short"><span class="octicon octicon-link"></span></a>Features in short</h2>

<ul>
<li>Scale up and down DynamoDB automatically</li>
<li>Restrict scaling to certain time slots</li>
<li>Monitor multiple DynamoDB tables at the same time</li>
<li>Gives you control over how much reads and writes you want to scale up and down with</li>
<li>Dynamic DynamoDB has support for max and min limits so that you always knows how much money you spend at most and how much capacity you can be guaranteed</li>
<li>Support for circuit breaker API call. If your service is experiencing disturbances, Dynamic DynamoDB will not scale down your DynamoDB tables</li>
</ul><h2>
<a name="basic-usage" class="anchor" href="#basic-usage"><span class="octicon octicon-link"></span></a>Basic usage</h2>

<p>This example will configure Dynamic DynamoDB to:</p>

<ul>
<li>Scale up your DynamoDB table when the consumed reads 90% of the total provisioned reads</li>
<li>Scale up your DynamoDB table when the consumed writes 90% of the total provisioned writes</li>
<li>Scale up your reads with 50%</li>
<li>Scale up your writes with 40%</li>
<li>Scale down your DynamoDB table when the consumed reads 30% of the total provisioned reads</li>
<li>Scale down your DynamoDB table when the consumed writes 40% of the total provisioned writes</li>
<li>Scale down your reads with 40%</li>
<li>Scale down your writes with 70%</li>
<li>Check for changes every 5 minutes</li>
</ul><p>Command:</p>

<pre><code>dynamic-dynamodb --table-name my-table \
                 --reads-upper-threshold 90 \
                 --reads-lower-threshold 30 \
                 --increase-reads-with 50 \
                 --decrease-reads-with 40 \
                 --writes-upper-threshold 90 \
                 --writes-lower-threshold 40 \
                 --increase-writes-with 40 \
                 --decrease-writes-with 70 \
                 --check-interval 300
</code></pre>

<p>Please note that using configuration files instead of command line options will give you even more control over the service.</p>

<h2>
<a name="installation-instructions" class="anchor" href="#installation-instructions"><span class="octicon octicon-link"></span></a>Installation instructions</h2>

<p>The easiest way to install Dynamic DynamoDB is through PyPI:</p>

<pre><code>pip install dynamic-dynamodb
</code></pre>

<h2>
<a name="example-configuration-file" class="anchor" href="#example-configuration-file"><span class="octicon octicon-link"></span></a>Example configuration file</h2>

<pre><code>[global]
# AWS access keys
#aws-access-key-id: AWS_ACCESS_KEY
#aws-secret-access-key-id: AWS_SECRET_KEY

# AWS region to use
region: us-east-1

# How often should Dynamic DynamoDB monitor changes (in seconds)
check-interval: 300

# Circuit breaker configuration
# No provisioning updates will be made unless this URL returns
# a HTTP 200 OK status code
#circuit-breaker-url: http://my.service.com/v1/is_up
#circuit-breaker-timeout: 500

[logging]
# Log level [debug|info|warning|error]
log-level: info

# Log file (comment out to get only console output)
log-file: /var/log/dynamic-dynamodb.log


[table: my_table]
#
# Read provisioning configuration
#

# Thresholds for scaling up or down the provisioning (%)
reads-upper-threshold: 90
reads-lower-threshold: 30

# How many percent should Dynamic DynamoDB increase/decrease provisioning with (%)
increase-reads-with: 50
decrease-reads-with: 50

# Units to increase or decrease reads with, must be either percent or units
increase-reads-unit: percent
decrease-reads-unit: percent

# Maximum and minimum read provisioning
# Dynamic DynamoDB will not provision any more or less reads than this
#min-provisioned-reads: 100
#max-provisioned-reads: 500

#
# Write provisioning configuration
#

# Thresholds for scaling up or down the provisioning (%)
writes-upper-threshold: 90
writes-lower-threshold: 30

# How many percent should Dynamic DynamoDB increase/decrease provisioning with (%)
increase-writes-with: 50
decrease-writes-with: 50

# Units to increase or decrease writes with, must be either percent or units
increase-writes-unit: percent
decrease-writes-unit: percent

# Maximum and minimum write provisioning
# Dynamic DynamoDB will not provision any more or less writes than this
#min-provisioned-writes: 100
#max-provisioned-writes: 500

#
# Maintenance windows (in UTC)
#
#maintenance-windows: 22:00-23:59,00:00-06:00

#
# Other settings
#

# Allow down scaling when at 0% consumed reads
#allow-scaling-down-reads-on-0-percent: true
#allow-scaling-down-writes-on-0-percent: true

# Restric scale down to only happend when BOTH reads AND writes are in need
# of scaling down. Set this to "true" to minimize down scaling.
#always-decrease-rw-together: true
</code></pre>

<p>Note: The configuration of tables support regular expressions so you could write <code>[table: log_* ]</code> if you want to target multiple tables with one config section.</p>

<h2>
<a name="full---help-output" class="anchor" href="#full---help-output"><span class="octicon octicon-link"></span></a>Full --help output</h2>

<pre><code>usage: dynamic-dynamodb [-h] [-c CONFIG] [--dry-run]
                        [--check-interval CHECK_INTERVAL]
                        [--log-file LOG_FILE] [--log-level LOG_LEVEL]
                        [--version] [--aws-access-key-id AWS_ACCESS_KEY_ID]
                        [--aws-secret-access-key AWS_SECRET_ACCESS_KEY]
                        [--daemon DAEMON] [--instance INSTANCE] [-r REGION]
                        [-t TABLE_NAME]
                        [--reads-upper-threshold READS_UPPER_THRESHOLD]
                        [--reads-lower-threshold READS_LOWER_THRESHOLD]
                        [--increase-reads-with INCREASE_READS_WITH]
                        [--decrease-reads-with DECREASE_READS_WITH]
                        [--increase-reads-unit INCREASE_READS_UNIT]
                        [--decrease-reads-unit DECREASE_READS_UNIT]
                        [--min-provisioned-reads MIN_PROVISIONED_READS]
                        [--max-provisioned-reads MAX_PROVISIONED_READS]
                        [--writes-upper-threshold WRITES_UPPER_THRESHOLD]
                        [--writes-lower-threshold WRITES_LOWER_THRESHOLD]
                        [--increase-writes-with INCREASE_WRITES_WITH]
                        [--decrease-writes-with DECREASE_WRITES_WITH]
                        [--increase-writes-unit INCREASE_WRITES_UNIT]
                        [--decrease-writes-unit DECREASE_WRITES_UNIT]
                        [--min-provisioned-writes MIN_PROVISIONED_WRITES]
                        [--max-provisioned-writes MAX_PROVISIONED_WRITES]

Dynamic DynamoDB - Auto provisioning AWS DynamoDB

optional arguments:
  -h, --help            show this help message and exit
  -c CONFIG, --config CONFIG
                        Read configuration from a configuration file
  --dry-run             Run without making any changes to your DynamoDB table
  --check-interval CHECK_INTERVAL
                        How many seconds should we wait between the checks
                        (default: 300)
  --log-file LOG_FILE   Send output to the given log file
  --log-level LOG_LEVEL
                        Log level to use (default: info)
  --version             Print current version number
  --aws-access-key-id AWS_ACCESS_KEY_ID
                        Override Boto configuration with the following AWS
                        access key
  --aws-secret-access-key AWS_SECRET_ACCESS_KEY
                        Override Boto configuration with the following AWS
                        secret key

Daemon options:
  --daemon DAEMON       Run Dynamic DynamoDB as a daemon [start|stop|restart]
  --instance INSTANCE   Name of the Dynamic DynamoDB instance. Used to run
                        multiple instances of Dynamic DynamoDB. Give each
                        instance a unique name and control them separately
                        with the --daemon flag. (default: default)

DynamoDB options:
  -r REGION, --region REGION
                        AWS region to operate in (default: us-east-1
  -t TABLE_NAME, --table-name TABLE_NAME
                        How many percent should we decrease the read units
                        with?

Read units scaling properties:
  --reads-upper-threshold READS_UPPER_THRESHOLD
                        Scale up the reads with --increase-reads-with percent
                        if the currently consumed read units reaches this many
                        percent (default: 90)
  --reads-lower-threshold READS_LOWER_THRESHOLD
                        Scale down the reads with --decrease-reads-with
                        percent if the currently consumed read units is as low
                        as this percentage (default: 30)
  --increase-reads-with INCREASE_READS_WITH
                        How many percent should we increase the read units
                        with? (default: 50, max: 100)
  --decrease-reads-with DECREASE_READS_WITH
                        How many percent should we decrease the read units
                        with? (default: 50)
  --increase-reads-unit INCREASE_READS_UNIT
                        Do you want to scale in percent or units? (default:
                        percent)
  --decrease-reads-unit DECREASE_READS_UNIT
                        Do you want to scale in percent or units? (default:
                        percent)
  --min-provisioned-reads MIN_PROVISIONED_READS
                        Minimum number of provisioned reads
  --max-provisioned-reads MAX_PROVISIONED_READS
                        Maximum number of provisioned reads
  --increase-writes-unit INCREASE_WRITES_UNIT
                        Do you want to scale in percent or units? (default:
                        percent)
  --decrease-writes-unit DECREASE_WRITES_UNIT
                        Do you want to scale in percent or units? (default:
                        percent)

Write units scaling properties:
  --writes-upper-threshold WRITES_UPPER_THRESHOLD
                        Scale up the writes with --increase-writes-with
                        percent if the currently consumed write units reaches
                        this many percent (default: 90)
  --writes-lower-threshold WRITES_LOWER_THRESHOLD
                        Scale down the writes with --decrease-writes-with
                        percent if the currently consumed write units is as
                        low as this percentage (default: 30)
  --increase-writes-with INCREASE_WRITES_WITH
                        How many percent should we increase the write units
                        with? (default: 50, max: 100)
  --decrease-writes-with DECREASE_WRITES_WITH
                        How many percent should we decrease the write units
                        with? (default: 50)
  --min-provisioned-writes MIN_PROVISIONED_WRITES
                        Minimum number of provisioned writes
  --max-provisioned-writes MAX_PROVISIONED_WRITES
                        Maximum number of provisioned writes
</code></pre>

<h2>
<a name="reporting-bugs" class="anchor" href="#reporting-bugs"><span class="octicon octicon-link"></span></a>Reporting bugs</h2>

<p>Please help me by providing feedback and bug reports. You can file bugs in the project's <a href="https://github.com/sebdah/dynamic-dynamodb/issues">GitHub Issues page</a>.</p>

<p>Provide as much details as possible to make bug fixing as swift as possible.</p>

<h2>
<a name="git-strategy" class="anchor" href="#git-strategy"><span class="octicon octicon-link"></span></a>Git strategy</h2>

<p>This project uses <a href="https://github.com/nvie/gitflow">git-flow</a> for handling branching and releasing in Git. See the following <a href="http://nvie.com/posts/a-successful-git-branching-model/">blog post</a> for more details on how it works.</p>

<h2>
<a name="release-information" class="anchor" href="#release-information"><span class="octicon octicon-link"></span></a>Release information</h2>

<p><strong>1.5.1 (2013-08-22)</strong></p>

<ul>
<li>
<a href="https://github.com/sebdah/dynamic-dynamodb/issues/53">No module named core</a> (fixed by <a href="https://github.com/sebdah/dynamic-dynamodb/pull/54">#54</a>)</li>
</ul><p>Fixed bug in the 1.5.0 release.</p>

<p><strong>1.5.0 (2013-08-22)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/52">Support for regular expressions in config</a></li>
</ul><p>Thanks <a href="https://github.com/pragnesh">@pragnesh</a> for adding this feature!</p>

<p><strong>1.4.0 (2013-08-14)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/51">Retrying failed DynamoDB connections</a></li>
</ul><p><strong>1.3.6 (2013-07-21)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/50">int() argument must be a string or a number, not 'NoneType' (#50)</a></li>
</ul><p><strong>1.3.5 (2013-06-17)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/47">increase_writes_unit parameter is used while it should be decrease_writes_unit (#47)</a></li>
</ul><p><strong>1.3.4 (2013-06-13)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/46">An attempt to update provisioning is made even if the requested values are equal to the tables current values (#46)</a></li>
</ul><p><strong>1.3.3 (2013-06-08)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/45">Increasing to a minimum provisioned throughput value doesn't take into account the current table's throughput (#45)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/44">dynamic-dynamodb --version causes AttributeError in cli (#44)</a></li>
</ul><p><strong>1.3.2 (2013-05-14)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/40">increase_reads_in_percent calculations are incorrect (#40)</a></li>
</ul><p><strong>1.3.1 (2013-05-10)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/39">Fix Python 2.6 support (#39)</a></li>
</ul><p><strong>1.3.0 (2013-05-01)</strong></p>

<p>This Dynamic DynamoDB release makes it possible to use multiple Dynamic DynamoDB instances in parallel in daemon mode. Simply use the <code>--instance</code> flag to separate the difference instances with a unique name. Then control them as usual with the <code>--daemon</code> flag.</p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/37">Allow to run multiple instances in parallel (#37)</a></li>
</ul><p><strong>1.2.5 (2013-04-29)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/36">Handle ResourceInUseException better (#36)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/34">Add --log-level option to command line (#34)</a></li>
</ul><p><strong>1.2.4 (2013-04-26)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/35">Mix up between percent and units (#35)</a></li>
<li>Broken build fixed</li>
</ul><p><strong>1.2.0 (2013-04-20)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/25">Add support for dead-man's-switch API call (#25)</a></li>
</ul><p><strong>1.1.0 (2013-04-17)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/22">Update provisioning in units not just percentage (#22)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/33">Increase in percent does not add to current provisioning properly (#33)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/32">Enhance configuration option validation (#32)</a></li>
</ul><p><strong>1.0.1 (2013-04-17)</strong></p>

<ul>
<li>Minor fix: Ugly output removed</li>
</ul><p><strong>1.0.0 (2013-04-16)</strong></p>

<p>The 1.0.0 release is a leap forward when it comes to module structure and extendability. Please remember that this is still released in beta in PyPI, so all bug reports are very welcome. File any odd behavior or bugs in <a href="https://github.com/sebdah/dynamic-dynamodb/issues">GitHub Issues</a>.</p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/30">Restructure the Dynamic DynamoDB code base (#30)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/19">Support multiple tables in one configuration file (#19)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/31">Change pid file name (#31)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/24">Handle combinations of configuration file and command line options better (#24)</a></li>
</ul><p><strong>0.5.0 (2013-04-12)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/20">Add --log-file command line option (#20)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/17">Allow scale down at 0% consumed count (#17)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/23">"only downscale reads AND writes" option would be useful (#23)</a></li>
</ul><p><strong>0.4.2 (2013-04-11)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/28">Unhandled exception: ValidationException (#28)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/29">Handle DynamoDB provisioning exceptions cleaner (#29)</a></li>
</ul><p><strong>0.4.1 (2013-04-10)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/21">No logging in --daemon mode (#21)</a></li>
</ul><p><strong>0.4.0 (2013-04-06)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/11">Support for daemonizing Dynamic DynamoDB (#11)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/4">Enhanced logging options (#4)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/18">Add --version flag to dynamic-dynamodb command (#18)</a></li>
</ul><p><strong>0.3.5 (2013-04-05)</strong></p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/12">Handle missing table exceptions (#12)</a></li>
<li>Bug fix: <a href="https://github.com/sebdah/dynamic-dynamodb/issues/16">No upscaling happening when scaling limit is exceeded (#16)</a>
</li>
</ul><p><strong>0.3.4 (2013-04-05)</strong></p>

<ul>
<li>Bug fix: <a href="https://github.com/sebdah/dynamic-dynamodb/issues/15">Min/max limits seems to be read improperly from configuration files (#15)</a>
</li>
</ul><p><strong>0.3.3 (2013-04-05)</strong></p>

<ul>
<li>Bug fix: <a href="https://github.com/sebdah/dynamic-dynamodb/issues/14">Mixup of read and writes provisioing in scaling (#14)</a>
</li>
</ul><p><strong>0.3.2 (2013-04-05)</strong></p>

<ul>
<li>Bug fix: <a href="https://github.com/sebdah/dynamic-dynamodb/issues/13">Improper scaling under certain circumstances (#13)</a>
</li>
</ul><p><strong>0.3.1 (2013-04-04)</strong></p>

<ul>
<li>Bug fix: <a href="https://github.com/sebdah/dynamic-dynamodb/issues/10">ValueError: Unknown format code 'd' for object of type 'str' (#10)</a>
</li>
</ul><p><strong>0.3.0 (2013-03-27)</strong></p>

<p>This release contains support for configuration files, custom AWS access keys and configurable maintenance windows. The maintenance feature will restrict Dynamic DynamoDB to change your provisioning only during specific time slots.</p>

<ul>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/6">Add support for configuration files (#6)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/5">Configure AWS credentials on command line (#5)</a></li>
<li><a href="https://github.com/sebdah/dynamic-dynamodb/issues/1">Support for maintenance windows (#1)</a></li>
</ul><p><strong>0.2.0 (2013-03-24)</strong></p>

<ul>
<li>First public release</li>
</ul><p><strong>0.1.1 (2013-03-24)</strong></p>

<ul>
<li>Initial release</li>
</ul><h2>
<a name="releasing-to-pypi" class="anchor" href="#releasing-to-pypi"><span class="octicon octicon-link"></span></a>Releasing to PyPI</h2>

<pre><code>make release
</code></pre>

<h2>
<a name="author" class="anchor" href="#author"><span class="octicon octicon-link"></span></a>Author</h2>

<p>This project is maintained by <a href="http://www.sebastiandahlgren.se">Sebastian Dahlgren</a> (<a href="https://github.com/sebdah">GitHub</a> | <a href="https://twitter.com/sebdah">Twitter</a> | <a href="http://www.linkedin.com/in/sebastiandahlgren">LinkedIn</a>)</p>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>APACHE LICENSE 2.0
Copyright 2013 Sebastian Dahlgren</p>

<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/sebdah">sebdah</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-37516009-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>